<!DOCTYPE html>
	<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
	<title>Marine Regions &middot; Abbott Seamount (Seamount(s))</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<link rel="stylesheet" href="https://www.marineregions.org/styles.css?2" type="text/css" />
	<script type="text/javascript" src="https://www.marineregions.org/gazetteer.php?p=js"></script>

		<script type="text/javascript" src="https://www.marineregions.org/inc/jquery/jquery.min.js" ></script>
		<script type="text/javascript" src="https://www.marineregions.org/inc/jquery_plugins/migrate/jquery-migrate.min.js" ></script>
		<script type="text/javascript">
		<!--
		function Start(URL){
		 windowprops='directories=no,location=no,menubar=no,resizable=no,scrollbars=yes,status=no,toolbar=no,width=800,height=650,left=100,screenX=100,top=100,screenY=100';
		 window.open(URL,'popWin',windowprops).focus();
		}
		//-->
		var timeout         = 750;
		var closetimer		= 0;
		var ddmenuitem      = 0;

		function jsddm_open()
		{	jsddm_canceltimer();
			jsddm_close();
			ddmenuitem = $(this).find('ul').eq(0).css('visibility', 'visible');}

		function jsddm_close()
		{	if(ddmenuitem) ddmenuitem.css('visibility', 'hidden');}

		function jsddm_timer()
		{	closetimer = window.setTimeout(jsddm_close, timeout);}

		function jsddm_canceltimer()
		{	if(closetimer)
			{	window.clearTimeout(closetimer);
				closetimer = null;}}

		$(document).ready(function()
		{	$('#menu > li').bind('mouseover', jsddm_open);
			$('#menu > li').bind('mouseout',  jsddm_timer);});

		document.onclick = jsddm_close;
		</script>

<!-- Piwik start -->
	<script type="text/javascript">
	var _paq = _paq || [];
_paq.push(['trackPageView']);
_paq.push(['enableLinkTracking']);
(function() {
	var u="//piwik.vliz.be/";
	_paq.push(['setTrackerUrl', u+'piwik.php']);
	_paq.push(['setSiteId', 35]);
	var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
	g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
})();
</script>
<noscript><p><img src="https://www.marineregions.org/piwik.vliz.be/piwik.php?idsite=35" style="border:0;" alt="" /></p></noscript>
<!-- Piwik end --></head>
		<body>

		<div id='wrapper'>
		<div id='mr_header'>
		<a href='/'><div id='icon'></div></a>
		<a href='/'><div id='sitename'></div></a><ul id="menu"><li ><a href="https://www.marineregions.org/about.php">About</a></li><li class="selected"><a href="https://www.marineregions.org/gazetteer.php?p=search">Gazetteer</a></li><li ><a href="https://www.marineregions.org/eezsearch.php">Maritime Boundaries</a></li><li ><a href="https://www.marineregions.org/sources.php">Sources</a></li><li ><a href="https://www.marineregions.org/content.php">Statistics</a></li><li ><a href="https://www.marineregions.org/downloads.php">Downloads</a></li></ul>
		</div><!-- close header -->
		<div id='headerleft'><ul id="leftmenu"><li><a href="https://www.marineregions.org/gazetteer.php?p=search" class="selected">Search</a></li><li><a href="https://www.marineregions.org/gazetteer.php?p=browser" >Browse</a></li><li><a href="https://www.marineregions.org/gazetteer.php" >About</a></li><li><a href="https://www.marineregions.org/tutorial.php" >Tutorial</a></li><li><a href="https://www.marineregions.org/gazetteer.php?p=webservices" >Webservices</a></li><li><a href="/gazetteer.php?p=login" >Login</a></li></ul></div><!-- close headerleft --><div id="content" ><h2>Marine Gazetteer Placedetails</h2>
<table border="0" cellpadding="2"><tr>
		<td align="right" valign="top"><b><span style="cursor: help;" title="Marine Regions Geoobject Identifier - Use this identifier to preserve the identity of the marine geographic objects from the database.">MRGID</span></b></td>
		
		<td align="left" valign="top">http://marineregions.org/mrgid/6557</td>
	</tr>
<tr>
		<td align="right" valign="top"><b>Status</b></td>
		
		<td align="left" valign="top">Proposed standard&nbsp;<img align="absmiddle" src="https://www.marineregions.org/images/gazetteer//icons/accept.png" alt="Proposed standard" title="Proposed standard" /></td>
	</tr>
<tr>
		<td align="right" valign="top"><b>Names</b></td>
		
		<td align="left" valign="top"><table border="0" cellpadding="2" cellspacing="0">
			<tr>
			 <td><b>Language</b></td>
			 <td><b>Name</b></td>
			 <td><b>Name source</b></td>
			</tr>
<tr><td valign="top">English</td><td valign="top">Abbott Seamount<!--<small> (preferred)</small>--></td><td valign="top">IHO-IOC GEBCO Gazetteer of Undersea Feature Names (2018-06-25)&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td valign="top">Russian</td><td valign="top">Gora Abbott</td><td valign="top">US BGN Advisory Committee on Undersea Features (ACUF) (look&nbsp;up&nbsp;in&nbsp;<a href="http://www.vliz.be/en/imis?module=ref&refid=302334" target="_blank">IMIS</a>)&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td valign="top">Russian</td><td valign="top">Гора Абботт</td><td valign="top">US BGN Advisory Committee on Undersea Features (ACUF) (look&nbsp;up&nbsp;in&nbsp;<a href="http://www.vliz.be/en/imis?module=ref&refid=302334" target="_blank">IMIS</a>)&nbsp;&nbsp;&nbsp;</td></tr>
</table>
</td>
	</tr>
<tr>
		<td align="right" valign="top"><b>PlaceType</b></td>
		
		<td align="left" valign="top">Seamount(s)&nbsp;</td>
	</tr>
<tr>
		<td align="right" valign="top"><b></b></td>
		
		<td align="left" valign="top"></td>
	</tr>
<tr>
		<td align="right" valign="top"><b>Latitude</b></td>
		
		<td align="left" valign="top">31&deg; 48' 0" N (31.8&deg;)&nbsp;&nbsp;</td>
	</tr>
<tr>
		<td align="right" valign="top"><b>Longitude</b></td>
		
		<td align="left" valign="top">174&deg; 18' 0" E (174.3&deg;)&nbsp;&nbsp;</td>
	</tr>
<tr>
		<td align="right" valign="top"><b></b></td>
		
		<td align="left" valign="top"></td>
	</tr>
<tr>
		<td align="right" valign="top"><b>Source</b></td>
		
		<td align="left" valign="top">IHO-IOC GEBCO Gazetteer of Undersea Feature Names (2018-06-25), <i>available online at</i> <a href="http://www.ngdc.noaa.gov/gazetteer/" target="_blank">http://www.ngdc.noaa.gov/gazetteer/</a></td>
	</tr>
<tr>
		<td align="right" valign="top"><b></b></td>
		
		<td align="left" valign="top"></td>
	</tr>
<tr>
		<td align="right" valign="top"><b>Notes</b></td>
		
		<td align="left" valign="top"><b>ACUF unique id (UFI)</b>: -152194&nbsp;&nbsp;&nbsp;&nbsp;</td>
	</tr>
<tr>
		<td align="right" valign="top"><b></b></td>
		
		<td align="left" valign="top"></td>
	</tr>
<tr>
		<td align="right" valign="top"><b>Relation&nbsp;</b></td>
		
		<td align="left" valign="top"><table border="0" cellpadding="0" cellspacing="0"><tr><td>Part of</td><td>&nbsp;&nbsp;<a href="gazetteer.php?p=details&id=1908">North Pacific Ocean</a> (IHO Sea Area)</td><td>&nbsp;&nbsp;[<a href="gazetteer.php?p=browser&id=7392#focus">view&nbsp;hierarchy</a>]&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td></td></tr></table>
</td>
	</tr>
<tr>
		<td align="right" valign="top"><b>Map</b></td>
		
		<td align="left" valign="top"><div style="width:600px; height:380px; border:1px solid;" id="map" ></div></td>
	</tr>
<tr>
		<td align="right" valign="top"><b></b></td>
		
		<td align="left" valign="top"><div id="gaz_position"></div></td>
	</tr>
<tr>
		<td align="right" valign="top"><b></b></td>
		
		<td align="left" valign="top"></td>
	</tr>
<tr>
		<td align="right" valign="top"><b></b></td>
		
		<td align="left" valign="top"></td>
	</tr>
<tr>
		<td align="right" valign="top"><b>Edit history</b></td>
		
		<td align="left" valign="top"><small>Last edited on 2016-04-23 15:22:42 by <a href="http://www.vliz.be/en/imis?module=person&persid=29287" target="_blank">Oset Garcia Paula</a></small>
</td>
	</tr>
<tr>
		<td align="right" valign="top"><b></b></td>
		
		<td align="left" valign="top"></td>
	</tr>
<tr>
		<td align="right" valign="top"><b></b></td>
		
		<td align="left" valign="top"></td>
	</tr>
<tr>
		<td align="right" valign="top"><b></b></td>
		
		<td align="left" valign="top"><span style='font-size: 10px'>[<a href="https://www.google.com/search?num=10&hl=en&as_epq=%22Abbott Seamount%22&lr=lang_en&as_ft=i&as_qdr=all&as_occt=any" target="_blank">Google</a>] [<a href="https://scholar.google.com/scholar?as_q=%22Abbott Seamount%22&num=10&btnG=Search+Scholar&as_occt=any&as_allsubj=some&as_subj=bio&hl=en" target="_blank">Google scholar</a>] [<a href="https://images.google.com/images?svnum=10&hl=en&as_epq=%22Abbott Seamount%22&safe=off" target="_blank">Google images</a>] </span></td>
	</tr>
</table>

<script src="https://www.vliz.be/gis/ol/proj4js.js"></script>
<script src="https://www.vliz.be/gis/ol/OpenLayers.js" type="text/javascript"></script>
<script src="https://www.vliz.be/gis/ol/deprecated.js" type="text/javascript"></script>
<script type="text/javascript">
var map;
//var layerstack=new Array();
var GMLlayercnt=0;
var GMLlayers=new Array();
var GMLcontrols=new Array();
OpenLayers.IMAGE_RELOAD_ATTEMPTS = 7;
OpenLayers.Util.onImageLoadErrorColor = "transparent";

var VLIZGIS = VLIZGIS || {};
VLIZGIS.legend_all_show_controls=true;

/* loads layer from VLIZ servers: geo, mapserver or TMS (Tile Map Server) */
function addOLlayer(layerprop){
 var typelayer;
 if (typeof(layerprop.type)!='undefined') typelayer=layerprop.type;
  /*pieterm added active layer from url param*/
 var url_layer_param="";
 if(layerprop.layers==url_layer_param) {
	 layerprop.show="true";
 }	 
 
 var url;
 if(typelayer=='geo') url="https://geo.vliz.be/geoserver/wms";
 else url=layerprop.otherurl;

 if (layerprop.fname){
	var fname=layerprop.fname;
	var name=fname.substr(fname.indexOf(':')+1);
	var lname = name.replace('/ /','_');
 }

 //visiblity of layer
 var show
 if (layerprop.show){
	if(layerprop.show=="true") show=true; else show=false;
 }else{
	show=true;
 }

 var layers;
 if (layerprop.layers) layers=layerprop.layers;

 if(typelayer=='geo' || typelayer=='url'){
	//params
	var layerParam = {layers: layers, transparent: 'true'} ;
	if (layerprop.filter){
		var filter = layerprop.filter;
		if(filter.indexOf('viewparams')>=0){
			layerParam.viewparams=filter.substring(filter.indexOf('viewparams')+11);
		}else{
			layerParam.CQL_FILTER=filter;
		}
	}

	if (typeof(layerprop.cqlfilter)!='undefined') layerParam.CQL_FILTER=layerprop.cqlfilter;

	if(layerprop.style) layerParam.styles=layerprop.style;
	//options
	var options={ratio:1, nocontrols: true, legendgetcap:0, noproj:0};
	options.singleTile=true ;
	if (layerprop.legendgetc) options.legendgetcap=layerprop.legendgetc;
	if (layerprop.noprojection) options.noproj=layerprop.noprojection;

	var lname = new OpenLayers.Layer.WMS(fname,url,layerParam,options);
	lname.visibility=show;
	map.addLayer(lname);

 }else if(typelayer=='map') {
	 var mapfile;
	 mapfile=layerprop.mapfile;
	 var options={buffer: 1,isBaseLayer: false};
	 if (layerprop.noprojection) options.noproj=layerprop.noprojection;

	 var lname = new OpenLayers.Layer.MapServer.Untiled(
		fname, url,
				{
				map:mapfile,mode:'map', format:'png',
				layers: layers, map_transparent:'ON'},options
				);
	 lname.visibility=show;
	 map.addLayer(lname);

 }else if(typelayer=='tms') {
	 var options={isBaseLayer: false};
	 if (layerprop.noprojection) options.noproj=layerprop.noprojection;
	 var lname = new OpenLayers.Layer.TMS (
		fname, url,
		{
			numZoomLevels: 18,
			type: 'png',
			getURL: getTileURL,
			isBaseLayer: false,
			displayOutsideMaxExtent: true
		}, options
	 );

	 lname.visibility=show;
	 map.addLayer(lname);
 }

 return lname;
}//end addOLlayer

var nextcolor=0;
var colors=new Array("#FF2222","#22FF22","#FFFF22","#FF22FF","#22FFFF","#BB4444","#44BB44","#BBBB44","#BB44BB","#44BBBB");


function getTileURL(bounds) {
	var res = this.map.getResolution();
	var x = Math.round((bounds.left - this.maxExtent.left) / (res * this.tileSize.w));
	var y = Math.round((this.maxExtent.top - bounds.top) / (res * this.tileSize.h));
	var z = this.map.getZoom();
	var limit = Math.pow(2, z);
	if (y < 0 || y >= limit) {
		return null;
	} else {
		x = ((x % limit) + limit) % limit;
		url = this.url;
		path= z + "/" + x + "/" + y + "." + this.type;
		if (url instanceof Array) {
			url = this.selectUrl(path, url);
		}
		return url+path;
	}
}

function addGMLlayer(name,searchURL,hidden,fixedpoint,pref_color,use_url,code_attribute,opacity)
{
	var color;
	var size;

	if(pref_color) color=(pref_color == 'color' ? "${color}" : pref_color );
	else color=colors[nextcolor];
	if (!opacity) opacity=1;
	if(fixedpoint) { size=1.5; } else { size="${size}"; };
	var defaultcontext = {
	 	getOpacity: function(feature) {
		             return(feature.layer.opacity);
					}
	 	,getColor: function(feature) {
		            if (feature.layer.color.indexOf('#')>-1) return feature.layer.color;
		            else return feature.attributes["color"];
		           }
	 	,getSize: featureGetSize
	 	,getzIndex: function(feature) {
		 			if (!isNaN(parseInt(feature.layer.zindex))) return feature.layer.zindex;
		 			else if (!isNaN(parseInt(feature.attributes["zindex"]))) return feature.attributes["zindex"];
		 			else return 0;
				  }
		,getgraphicName: function(feature) {
		            if (feature.layer.graphicName) return feature.layer.graphicName;
		 			else if (feature.attributes["graphicName"]) return feature.attributes["graphicName"];
		 			else return "circle";
		           }
	};

	var defaulttemplate = {
		fillColor: "${getColor}",
		fillOpacity: "${getOpacity}",
		strokeWidth: 0,
		pointRadius: "${getSize}",
		graphicZIndex: "${getzIndex}",
		graphicName: "${getgraphicName}"
	};

	var selectedtemplate = {
		fillColor: "${getColor}",
		fillOpacity: "${getOpacity}",
		strokeWidth: 1,
		pointRadius: "${getSize}",
		graphicZIndex: "${getzIndex}",
		graphicName: "${getgraphicName}",
		strokeColor: "#66ccff",
		cursor: "pointer"
	};

	var defaultstyle = new OpenLayers.Style(defaulttemplate, {context: defaultcontext});
	var selectstyle = new OpenLayers.Style(selectedtemplate, {context: defaultcontext});
	var myStyles = new OpenLayers.StyleMap({"default":defaultstyle,"select":selectstyle});

	var options={
		color: color,
		symbolsize: size,
		opacity: opacity,
		projection: new OpenLayers.Projection("EPSG:4326"),
		format: OpenLayers.Format.GML,
		formatOptions: {
			extractStyles: true,
			extractAttributes: true,
			useurl : use_url,
			useattribute: code_attribute
		},
		nocontrols: true,
		rendererOptions: { zIndexing: true }
	};

	GMLlayers[GMLlayercnt] = new OpenLayers.Layer.GML('Data:'+name,searchURL ,options);
	GMLlayers[GMLlayercnt].styleMap=myStyles;
	if(hidden) GMLlayers[GMLlayercnt].visibility=false;
	map.addLayer(GMLlayers[GMLlayercnt]);

	if(typeof(GMLcontrol)=='object') GMLcontrol.deactivate();

	GMLcontrol= new OpenLayers.Control.SelectFeature(
				GMLlayers,
				{hover: true, onSelect: onFeatureSelect , clickFeature: onFeatureClick, onUnselect: onFeatureUnselect });

	map.addControl(GMLcontrol);
	GMLcontrol.activate();
	GMLlayercnt++;
	nextcolor=nextcolor+1;
	if(nextcolor >= colors.length ) nextcolor=0;
}

function featureGetSize(feature) {
    if (!isNaN(parseFloat(feature.layer.symbolsize))) return feature.layer.symbolsize;
    else return feature.attributes["size"];
}

// te definieren in applicatie; gewoon assignem bv onFeatureClick= mijnfunctie
function onFeatureClick(feature) {
	var code;
 	code=(feature.layer.formatOptions['useattribute']?feature.attributes[feature.layer.formatOptions['useattribute']]:(feature.attributes['station'] ? feature.attributes['station'] : feature.attributes['code'] ));
 	code=code.replace(/ /,'');
 	if(feature.layer.formatOptions['useurl'])	window.open(feature.layer.formatOptions['useurl'] + code);
}

function onFeatureSelect(feature) {
	OpenLayers.Popup.COLOR="#EEEE00";
	var label = (feature.attributes['label'] ? feature.attributes['label']
						: "Station: " + feature.attributes['station'] );
	var ts ;
	if(feature.attributes['observation']) label+= '<br>' + feature.attributes['observation'];
	else if(feature.attributes['datetime']) label+= '<br>Time: ' + feature.attributes['datetime'];



	popup = new OpenLayers.Popup.Anchored('popup',
                             feature.geometry.getBounds().getCenterLonLat(),
                             null,
                             "<div style='font-size:.8em;margin-left:10px'>"+ label + "</div>", null);

	popup.autoSize=true;
    feature.popup = popup;
    map.addPopup(popup);
}

function onFeatureUnselect(feature) {
    map.removePopup(feature.popup);
    feature.popup.destroy();
    feature.popup = null;
}

function proj(){
//used in dataportal
}

function setlayer(i){
 if(map.layers[i].visibility){
	if(map.layers[i]==map.baseLayer) return;
	map.layers[i].setVisibility(false);
 }else{
	if(map.layers[i].isBaseLayer) map.setBaseLayer(map.layers[i]);
	map.updateSize();
	map.layers[i].setVisibility(true);
 }

 if(map.layers[i]!=map.baseLayer) {
	proj();
 }
 getlegend();
}

function setmultilayer(i, j) {
    var layernames=getLayersOrdered();
    while (i <= j) {
        var iTranslated = layernames[i][1];
        if (map.layers[iTranslated].visibility) {
            if (map.layers[iTranslated] == map.baseLayer) return;
            map.layers[iTranslated].setVisibility(false);
        } else {
            if (map.layers[iTranslated].isBaseLayer) map.setBaseLayer(map.layers[iTranslated]);
            map.updateSize();
            map.layers[iTranslated].setVisibility(true);
        }

        if (map.layers[iTranslated] != map.baseLayer) {
            proj();
        }
        i++;
    }
    getlegend();
}

function legendcall(url,layer){
    var xhr;
	try{
		// Opera 8.0+, Firefox, Safari
		xhr = new XMLHttpRequest();
	}catch(e){
		// Internet Explorer Browsers
		try{
			xhr = new ActiveXObject("Msxml2.XMLHTTP");
		}catch(e){
			try{
				xhr = new ActiveXObject("Microsoft.XMLHTTP");
			}catch(e){
				// Something went wrong
				return false;
			}
		}
	}
	url=url.replace("http://", "");
	xhr.open('GET', 'index.php?call=legend&path='+encodeURI(url) +'&lname='+layer,false);
	xhr.send(null);

	if (xhr.status == 200) {
		return xhr.responseText
	}
}

function aftergetLegend(){
}

/* help functions for getlegend */
// gewoon genDiplay overschrijven om opacity controls etc niet te tonen
function genDisplayOptions(i){
	var checked;
	var next,prev,nstr,ostr,opacity,lstr,qstr,coloroptions,sizeoptions,opacityoptions;
	nstr=" ";
	ostr="";
	coloroptions="";
	sizeoptions="";
	opacityoptions="";
	next= checkIndex(i,1);
	prev= checkIndex(i,-1);

	if(map.layers[i].options['hidelegend']) lstr='show'; else lstr='hide';
	if(map.layers[i].options['nolegend']) lstr='';
	if(map.layers[i].options['disableWFSquery']) qstr='enable'; else qstr='disable';

	/* gml layers */
	if(typeof(map.layers[i].styleMap)!='undefined')
		for(ci=0;ci<colors.length;ci++) coloroptions+="<img src='https://www.vliz.be/gis/icons/circle.gif' onclick='changeColor("+i+","+ci+")'  style='background-color:"+colors[ci]+";' > "
	if(typeof(map.layers[i].styleMap)!='undefined')
		for(ci=1;ci<7;ci++) sizeoptions+="<img src='https://www.vliz.be/gis/icons/circle.gif' width="+ (ci *  2) +"px onclick='changeSize("+i+","+ci+")'  style='background-color:"+ map.layers[i].color   +";' > "
	if(typeof(map.layers[i].styleMap)!='undefined')
		for(ci=1;ci<10;ci++) opacityoptions+="<img src='https://www.vliz.be/gis/icons/circle.png' width=5px onclick='changeOpacity("+i+","+ci+")'  style='opacity:"+(ci/10)+  ";filter:alpha(opacity=" +(ci*10) + ");background-color:"+ map.layers[i].color   +";' > "
	else
		for(ci=1;ci<10;ci++) opacityoptions+="<img src='https://www.vliz.be/gis/icons/blackcircle.png' width=5px onclick='changeOpacity("+i+","+ci+")'  style='opacity:"+(ci/10)+ ";filter:alpha(opacity=" +(ci*10) +") ;background-color:white;' > "

/* opacity
opacity = (map.layers[i].opacity == null | typeof(map.layers[i].opacity)=='undefined'  | typeof(map.layers[i].opacity)=='NaN' | Math.round(map.layers[i].opacity * 10,1)/10==1 ? '1.0' : Math.round(map.layers[i].opacity * 10,1)/10 )
ostr = (opacity == 0.1 ? '' : "<a style='cursor:pointer;' title='decrease opacity' onclick='changeOpacity("+ i +",-0.1);'><image  width=12 src=https://www.vliz.be/gis/icons/minus.png></a>" );
ostr += (opacity == '1.0'  ? '' : "<a style='cursor:pointer' title='increase opacity' onclick='changeOpacity("+ i +", 0.1);'><image width=12 src=https://www.vliz.be/gis/icons/plus.png></a>" );
*/

	/* Z-order */
	if(typeof(prev) != 'undefined')
		nstr+="<a style='cursor:pointer' title='move under " + map.layers[prev].name.substr(map.layers[prev].name.indexOf(':')+1)  + " ' onclick='changeIndex("+ i +"," + prev +");'><image style='background-color:red;' width=12 src=https://www.vliz.be/gis/icons/mono/white/layers_2_icon&16.png></a>";
	if(typeof(next) != 'undefined')
		nstr+="<a style='cursor:pointer' title='move above " + map.layers[next].name.substr(map.layers[next].name.indexOf(':')+1) + " ' onclick='changeIndex("+ i +","+ next + ");'><image style='background-color:red;' width=12 src=https://www.vliz.be/gis/icons/mono/white/layers_1_icon&16.png></a>";
	if(typeof(checkorder(i))=='undefined') { nstr=''; lstr=''; } // oa background layers


	return("<div class='legendcontrols' >"
//	+(ostr.length> 1 ? "<span>Opacity:"+ opacity + " " + ostr + "</span>" :"")
	+(opacityoptions==''?'':"<span style='cursor:pointer' >opacity: "+opacityoptions+" </span>")
	+(coloroptions==''?'':"<br><span style='cursor:pointer' >color: "+coloroptions+" </span>")
	+(sizeoptions==''?'':"<br><span style='cursor:pointer' >size: "+sizeoptions+" </span>")
	+(nstr.length >1 ?  "<br><span>order:" + nstr + "</span>" : '' )
	//+(nstr.length >1 ?  "<br><span>z-order:" + checkorder(i) + " " + nstr + "</span>" : '' )
	+(lstr=='' ? '' :
	"<br><span style='cursor:pointer'  onclick='toggleOption("+i+",\"hidelegend\")'>" + lstr + " legend </span> " +
	"<br><span style='cursor:pointer' onclick='toggleOption("+i+",\"disableWFSquery\")'>" + qstr + " WFS query </span>" )
	+ "</div>" 	 );
}

function toggleOption(i,optionname){
var obj;
	if(map.layers[i].options[optionname])
		obj = eval("({" + optionname + ":false})");

	else
		obj = eval("({" + optionname + ":true})");

	map.layers[i].addOptions(obj);
	getlegend();
}

function checkorder(i){
	var ar= new Array(); var order;
	order=0;
	for(j=0;j<map.layers.length;j++)
		if(map.layers[j].visibility && !map.layers[j].isBaseLayer && typeof(map.layers[j].styleMap)=='undefined')
			ar[j]=order++;
	return(ar[i]);
}

function changeIndex(i,j){
	if(i==0) return;
	if(typeof(j)=='undefined') return;
	map.setLayerIndex(map.layers[i],j);
	getlegend();
}

function checkIndex(i,by){
	var j; var nextIndex;
	nextIndex==0;
	if(by==1){
		if(i==map.layers.length-1) return;
		for(j=i+1;j<map.layers.length;j++)
			if(map.layers[j].visibility && !map.layers[j].isBaseLayer && map.layers[j].name.indexOf('OpenLayers.Control')<0 && typeof(map.layers[j].styleMap)=='undefined') //vektorlagen doen dat soms
			{ nextIndex=map.getLayerIndex(map.layers[j]); break;}
	}
	else
	if(by==-1)
	{
		if(j==1) return;
		for(j=i-1;j>0;j--)
			if(map.layers[j].visibility && !map.layers[j].isBaseLayer && map.layers[j].name.indexOf('OpenLayers.Control')<0 && typeof(map.layers[j].styleMap)=='undefined')
			{ nextIndex=map.getLayerIndex(map.layers[j]);  break;}
	}

	if(nextIndex==0) return;
	if(typeof(nextIndex)=='undefined') return;
	return(nextIndex);
}


function changeOpacity(i,byOpacity) {
	if(byOpacity > 0.1 )
		map.layers[i].setOpacity(byOpacity / 10) ;
	else
		map.layers[i].setOpacity(map.layers[i].opacity + byOpacity > 1 ? 1 : (map.layers[i].opacity + byOpacity < 0.1 ? 0.1 : map.layers[i].opacity + byOpacity));
	if(typeof(map.layers[i].styleMap)!='undefined') map.layers[i].redraw(true);
	OpenLayers.Util.getElement('optionsdiv'+i).innerHTML=genDisplayOptions(i);
	getlegend();
}

function changeColor(i,ci) {
	map.layers[i].color=colors[ci];
	if(typeof(map.layers[i].styleMap)!='undefined') map.layers[i].redraw(true);
	OpenLayers.Util.getElement('optionsdiv'+i).innerHTML=genDisplayOptions(i);
	getlegend();
}

function changeSize(i,ci) {
	map.layers[i].symbolsize=ci;
	if(typeof(map.layers[i].styleMap)!='undefined') map.layers[i].redraw(true);
	OpenLayers.Util.getElement('optionsdiv'+i).innerHTML=genDisplayOptions(i);
	getlegend();
}

function hidetheme(layernr,hidden,doGetlegend){
	if (typeof(doGetlegend)=='undefined') {
		doGetlegend=true;
	}
	var i;
	var thistheme;
	var theme=map.layers[layernr].name.substring(0,map.layers[layernr].name.indexOf(':'));
	if(theme.indexOf('.'))	theme=theme.substring(theme.indexOf('.')+1);
	for(i=0;i < map.layers.length;i++){
		thistheme=map.layers[i].name.substring(0,map.layers[i].name.indexOf(':'));
		if(thistheme.indexOf('.'))	thistheme=thistheme.substring(thistheme.indexOf('.')+1);
		if(thistheme == theme)
			if(hidden) 	map.layers[i].addOptions({'hidetheme':true});
			else map.layers[i].addOptions({'hidetheme':false});

 	}//for
	if (doGetlegend){
		getlegend();
	}
}

function getLayersOrdered() {
    var layernames = [];
    var layernamesbase = [];

    for(var i=0; i < map.layers.length; i++) {
        if (map.layers[i].name.indexOf('OpenLayers') === -1) {
            if (map.layers[i].isBaseLayer) {
                layernamesbase.push([map.layers[i].name, i, map.layers[i].isBaseLayer]);
            } else {

                layernames.push([map.layers[i].name, i, map.layers[i].isBaseLayer]);
            }
        }
    }
    layernames=layernames.sort();
    return layernamesbase.concat(layernames);
}


/* till here the helper function

Generate the legend
(string) type= [null / all / active ]
*/
function getlegend(type){
 var i;
 //var j;
 var k;
 var str="";
 var checked;
 var lstr;
 var urstr;
 var mapstr;
 var ar;
 var istr;
 var displayname;
 var theme;
 var prevtheme;
 var layernames=getLayersOrdered();

//store whether controls need to be displayed globally
if (typeof type !== 'undefined' && type=='all') VLIZGIS.legend_all_show_controls=false;
var display_method = getLegendDisplayMethod();
var layernames_cnt = layernames.length;
for(var k=0;k < layernames_cnt;k++){
  i=layernames[k][1];
  checked=""; lstr=""; mapstr="";urstr="";ar="";istr="";displayname="";theme="";
  if (display_method === 1 /*Remove xxx: prefix*/) {
    displayname=map.layers[i].name.substr(map.layers[i].name.indexOf(':')+1);
  } else {
    //Don't parse anything
    displayname=map.layers[i].name;
  }

    //Peak ahead for grouping
    var peak_index = k + 1;
    var last_group_index = k;
    while(peak_index  < layernames.length && map.layers[i].name + '__grouped' === map.layers[layernames[peak_index][1]].name) {
        peak_index++;
    }
    if (--peak_index > k) {
        //Group detected => peak_index == index last grouped item
        last_group_index = peak_index;
    }

  if(map.layers[i].isBaseLayer && map.layers[i].name.indexOf('HIDDEN')==-1)	theme='';
  else if(map.layers[i].name.indexOf(':'))	theme=map.layers[i].name.substring(0,map.layers[i].name.indexOf(':'));
  else theme='';

  if(theme.indexOf('.'))	theme=theme.substring(theme.indexOf('.')+1);

  // soms verdwijnt de kaart als je in FF naar een andere website gaat redrawing help dan misschien?
  map.layers[i].redraw();

	if(map.layers[i].isBaseLayer){
  	 	type=" type='radio'";
   		if(map.layers[i]== map.baseLayer)
   		checked=" checked ";
  		else {
			if(map.layers[i].disabled) checked=" disabled ";
			map.layers[i].visibility=false;
			map.layers[i].display();
		}
  	}
	else{
   		type=" type='checkbox' ";
   		if(map.layers[i].visibility) {
   		checked=" checked ";

		}

   		if(map.layers[i].disabled) checked+=" disabled ";
  	}



  if(map.layers[i].url && typeof(map.layers[i].url)=='string' && map.layers[i].params && map.layers[i].visibility )
	{
		if(map.layers[i].isBaseLayer || map.layers[i].params['nolegend'] ||   map.layers[i].options['hidelegend'] ){
			urstr='';
		}else{
			urstr=map.layers[i].url;
			if (map.layers[i].options['legendgetcap']==0){
				if(urstr.indexOf('?')==-1) urstr+='?';
				urstr+= "&service=WMS&TRANSPARENT=true&REQUEST=GetLegendGraphic&VERSION=1.1.1&FORMAT=image/png&";
				if(map.layers[i].params['map']) urstr+="&map=" + map.layers[i].params['map'];
				if(map.layers[i].params['CQL_FILTER']) urstr+='&CQL_FILTER=[' + escape(map.layers[i].params['CQL_FILTER'])+']';
				if(map.layers[i].params['SLD']) urstr+='&SLD=' + escape(map.layers[i].params['SLD']);
				if(map.layers[i].params['STYLES']) urstr+='&STYLE=' + map.layers[i].params['STYLES'];
			}
		}

		var layerstr=(typeof(map.layers[i].params['LAYERS'])=='string' ? map.layers[i].params['LAYERS'] :
						(typeof(map.layers[i].params['layers'])=='string' ? map.layers[i].params['layers'] :
						  (typeof(map.layers[i].params['LAYERS'])=='array' ? map.layers[i].params['LAYERS'][0] :
						    map.layers[i].name)));

		ar= layerstr.split(',');
		if(map.layers[i].options['legendgetcap']==0){
			if(ar.length >1)
			{
			 for(var j=0;j < ar.length; j++)
				{
				lstr+="<tr><td><div class='legendtext'>";
				if(ar[j]!=map.layers[i].name) lstr+= "<span style='margin-left:20px;' >"+ar[j]+"</span></div>";
				if(urstr) lstr+= "<img class='legendimage' src='" + urstr + "&layer=" + encodeURIComponent(ar[j]) + "'> ";
				lstr+= "</td></tr>" ;
				}
			}
			else if(ar.length==1 && urstr)
				istr="<img class='legendimage'  src='" + urstr + "&layer=" + encodeURIComponent(ar[0]) + "'> " ;
			else if(urstr)
				lstr="<tr><td ><img class='legendimage'  src='" + urstr +  "'></td></tr>" ;
		}else{
			if(ar.length >1){
			 for(var j=0;j < ar.length; j++){
				lstr+="<tr><td><div class='legendtext'>";
				if(ar[j]!=map.layers[i].name | ar.length>1) lstr+= "<span style='margin-left:20px;' >"+ar[j]+"</span></div>";
				if(urstr){
					lstr+= "<img class='legendimage' src='" + legendcall(urstr,ar[j]) + "'> ";
					lstr+= "</td></tr>" ;
				}
			 }
			}else if(ar.length==1 && urstr){
				istr="<img class='legendimage'  src='" + legendcall(urstr,ar[0]) + "'> " ;
			}else if(urstr){
				lstr="<tr><td ><img class='legendimage'  src='" + legendcall(urstr,map.layers[i].name) + "'></td></tr>" ;
			}
		}
	}
	else if(map.layers[i].color && map.layers[i].visibility){
			istr="<img src='https://www.vliz.be/gis/icons/circle.gif' class='legendimage' style='background-color:"+map.layers[i].color+";' > " ;
	}

	if(theme!='HIDDEN') {

	if(theme && theme!=prevtheme)
			if(map.layers[i].options['hidetheme'] )
			str+="<tr><td ><div onclick='hidetheme("+i+",false)' class='thematext'><img class=button  src=https://www.vliz.be/gis/icons/mono/white/sq_plus_icon&16_otherside.png /> "+theme+"</div></td></tr>";
		else
			str+="<tr><td ><div onclick='hidetheme("+i+",true)' class='thematext'><img class=button src=https://www.vliz.be/gis/icons/mono/white/sq_minus_icon&16_otherside.png /> "+theme+"</div></td></tr>";

	if (VLIZGIS.legend_all_show_controls) genDisplayOptions(i);

	if(!map.layers[i].options['hidetheme'] )
	{

	str+="<tr><td ><div class='legendtext'>";

	if(map.layers[i].visibility)
	{
	str+="<input name='layers' onclick='setmultilayer(" + k + ", " + last_group_index +");'  " + type + checked  +  ">"+displayname;
	if(VLIZGIS.legend_all_show_controls && typeof(controls)!='undefined' && controls!="")
	str+="<img  class='button' onclick='toggleOption("+i+",\"nocontrols\")' src=https://www.vliz.be/gis/icons/mono/white/" 	+ (map.layers[i].options['nocontrols'] ? "sq_br_down_icon&16_otherside.png" : "sq_br_up_icon&16_otherside.png" ) + " />";
	  if(!map.layers[i].options['nocontrols'] && typeof(controls)!='undefined')
	  	str+="<div id='optionsdiv"+i +"'>" + controls + "</div>";
	}
	else str+="<input name='layers' onclick='setmultilayer(" + k + ", " + last_group_index +");'  " + type + checked  +  ">"+displayname;

	str+="</div>  " + (VLIZGIS.legend_all_show_controls ? (istr + lstr) : '') + "</td></tr>"  ;
	}

	}
	prevtheme=theme;

    if (last_group_index !== k) {
        //Group detected => peak_index == index last grouped item
        //but loop will augment also, hence the -1
        k = last_group_index;
    }
 }

 OpenLayers.Util.getElement('legend').innerHTML="<form action=#><table >" + str + "</table></form>";
 aftergetLegend();
}//getlegend


//used by clickmap
function setHTML(response,event) {
 var str=response.responseText;
 OpenLayers.Util.getElement('nodelist').innerHTML += str;
}

// support GetFeatureInfo
function clickmap (e)
{
	OpenLayers.ProxyHost = 'index.php?call=proxy&url='

	if(document.getElementById('nodelist')) document.getElementById('nodelist').innerHTML = "";
	var i;
	for(i=0;i<map.layers.length;i++)
	{ if(map.layers[i].visibility && typeof(map.layers[i].params)!='undefined' && !map.layers[i].options['disableWFSquery'])
		{
		if(map.layers[i].params.LAYERS)
        	var url =  map.layers[i].getFullRequestString(
            {
                REQUEST: "GetFeatureInfo",
                EXCEPTIONS: "application/vnd.ogc.se_xml",
                BBOX: map.getExtent().toBBOX(),
                X: Math.round(e.xy.x),
                Y: Math.round(e.xy.y),
                INFO_FORMAT: 'text/html',
                QUERY_LAYERS: map.layers[i].params.LAYERS,
                FEATURE_COUNT: 50,
                WIDTH: map.size.w,
                HEIGHT: map.size.h,
                server:'geo'
            }
			);
        else if(map.layers[i].params.layers)
            var url =  map.layers[i].getFullRequestString(
            {
                REQUEST: "GetFeatureInfo",
                EXCEPTIONS: "application/vnd.ogc.se_xml",
                BBOX: map.getExtent().toBBOX(),
                X: Math.round(e.xy.x),
                Y: Math.round(e.xy.y),
                INFO_FORMAT: 'text/html',
                VERSION:'1.0.0',
                QUERY_LAYERS: map.layers[i].params.layers,
                FEATURE_COUNT: 50,
                WIDTH: map.size.w,
                HEIGHT: map.size.h,
                server:'map'
            }
			);
			if(url)
			{
			// OpenLayers.loadURL(url, '', this, setHTML, setHTML);
			OpenLayers.loadURL(url, '', this, function(response){  setHTML(response,e); } , function(response){  setHTML(response,e); } );
    		}
		}
	}
OpenLayers.Event.stop(e);
}//clickmap
function formatposition(lonLat){

	return("<table width=170px ><tr><td width=50%>Lat: " +Math.round(lonLat.lat*100)/100 + "</td><td> Lon:" + Math.round(lonLat.lon*100)/100 + "</td></tr></table>" );
}

//Fix for legend cannot contains links => use can override this function
function getLegendDisplayMethod() {
    return 1; //Default should be parse due to backwards compatibility
    /*0) Don't parse */
    /*1) Remove xxx: prefix from map name */
}


//basis functie om maps voor een bepaalde regio op te roepen andere types volgen
function mapinit(region){
 if(map) {getlegend(); return;}

 OpenLayers.IMAGE_RELOAD_ATTEMPTS = 7;

	var maxbounds = new OpenLayers.Bounds(-180, -90, 180, 90);
	var startbounds = new OpenLayers.Bounds(-180, -70, 180, 70);
	var options = {
			maxExtent: maxbounds,
			projection: "EPSG:4326",
            units: 'degrees',
            maxResolution: 1.2
			 };
	map = new OpenLayers.Map('map',options);

	var base2 = new OpenLayers.Layer.WMS(
        "Continents", "https://geo.vliz.be/geoserver/wms",
        { srs: "EPSG:4326",layers: 'World:worldcountries', nolegend:true ,transparent: "true" }, {singleTile: true, ratio: 1,isBaseLayer: true} );
	map.addLayer(base2);

	map.addControl(new OpenLayers.Control.MousePosition({div: $('location'), formatOutput: formatposition}));
	map.zoomToExtent(maxbounds,true);
	map.events.register('click', map, clickmap 	);
}

// basis init met googlemaps
function googlemapinit(region){
if(map) {getlegend();return;}

OpenLayers.IMAGE_RELOAD_ATTEMPTS = 7;
OpenLayers.Util.onImageLoadErrorColor = "transparent";

 	var maxbounds = new OpenLayers.Bounds(-20037508.34, -20037508.34,20037508.34, 20037508.34);
 	var	startbounds=maxbounds;
	if(region=='BCP')
		startbounds = new OpenLayers.Bounds(128863,6565471,524879,6766853);
	if(region=='schelde')
		startbounds = new OpenLayers.Bounds(311863,6615471,514879,6736853);

	var google_options = {
                projection: new OpenLayers.Projection("EPSG:900913"),
				displayProjection: new OpenLayers.Projection("EPSG:4326"),
                units: "m",
				maxResolution: 156543.0339,
                maxExtent: new OpenLayers.Bounds(-20037508.34, -20037508.34,20037508.34, 20037508.34)
            };


	map = new OpenLayers.Map('map',google_options);

    var gsat = new OpenLayers.Layer.Google(
                "Google_Satellite",
                {type: G_SATELLITE_MAP, "sphericalMercator": true, isBaseLayer: true}            );
	var gphy = new OpenLayers.Layer.Google(
                "Google_Physical",
                {type: G_PHYSICAL_MAP ,"sphericalMercator": true, isBaseLayer: true}            );

	map.addLayers([gsat,gphy]);
	map.zoomToExtent(startbounds,true);
	map.addControl(new OpenLayers.Control.MousePosition({div: $('location') }));
	map.addControl(new OpenLayers.Control.LayerSwitcher());

}
</script>

<style type="text/css">
    /*margin and padding on body element
      can introduce errors in determining
      element position and are not recommended;
      we turn them off as a foundation for YUI
      CSS treatments. */
    body {
        margin:0;
    	padding:0;
    }

    content {
    	margin:10px;
    }

    #kaart {
    	position:relative;
    	width: 800px;
    }
    #legend{
    	position:relative;
		width:300px;
		border: 1px solid black;
		overflow:auto;
		height:600px;
    }

    div.legendtext{
    	font-size:10px;
    	float:left;
    	color: #000000;
		min-width:150x;
	}

	.button {
		background-color: #0065ad;
		margin: 0px 2px 0px 2px;
		cursor: hand;
		cursor:pointer;
		width:10px;
	}

	div.legendcontrols{
		clear:both;
		position:relative;
		top:0px;
    	font-size:9px;
		margin:0px 0px 0px 20px;
		border: 1px solid #CCE6FF;
    	color: #0065ad;
	}

	.thematext{
		font-weight: bold;
		vertical-align:middle;
		border-bottom-style:solid;
		border-bottom-width:1px;
		border-color: #0065ad;
		color: #0065ad;
	}

    .legendimage{
		float:right;
    	max-width:300px;
	}

    #map {
    	position:relative;
        width: 800px;
        height: 450px;
        border: 1px solid black;
    }

	#overviewmap{

		width:120px;
		height:100px;
        border: 1px solid black;
    }

    #wrapper{
    	position:relative;
    }

    #nodelist {
    	position:relative;
    }

	.olControlOverviewMapElement {
		background-color: transparent !important;
		padding: 0 0 0 0  !important;
    	overflow: hidden;
    }
</style><script type="text/javascript">
         OpenLayers.IMAGE_RELOAD_ATTEMPTS = 3;
         OpenLayers.Util.onImageLoadErrorColor = "transparent";
         OpenLayers.DOTS_PER_INCH = 25.4 / 0.28;
         Proj4js.defs["EPSG:3031"] = "+proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs";
         Proj4js.defs["EPSG:3857"] = "+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +towgs84=0,0,0,0,0,0,0 +nadgrids=@null +units=m +no_defs";

         var options= { displayProjection: new OpenLayers.Projection("EPSG:4326"),
		 			    maxExtent: new OpenLayers.Bounds(-20037508.34, -20037508.34, 20037508.34, 20037508.34)}
		 map = new OpenLayers.Map("map",options);

		//GEBCO
		var bodc="<img src=\"https://www.vliz.be/gis/icons/info.gif\" alt=\"Source: GEBCO\" title=\"Source: GEBCO\" border=\"0\" />";
		var gebco = new OpenLayers.Layer.WMS(
     	 "GEBCO 2014"+bodc, "https://geo.vliz.be/geoserver/gwc/service/wms",
       	 {layers: 'BODC_GEBCO2014', srs: 'EPSG:4326', format: 'image/png'},
         {isBaseLayer: true,
	      maxResolution: 0.703125,
		  units: 'degrees',
		  maxExtent: new OpenLayers.Bounds(-180, -90, 180, 90),
		  projection: 'EPSG:4326',
		  wrapDateLine: true
		 }
        );
        map.addLayer(gebco);

        //IBCSO Antarctic
        var ibcso="<img src=\"https://www.vliz.be/gis/icons/info.gif\" alt=\"Source: International Bathymetric Chart of the Southern Ocean (IBCSO)\" title=\"Source: International Bathymetric Chart of the Southern Ocean (IBCSO)\" border=\"0\" />";
		var antarctica = new OpenLayers.Layer.WMS(
		 "IBCSO (Antarctica)"+ibcso, "https://geo.vliz.be/geoserver/gwc/service/wms",
		 {layers: 'IBCSO:antarctica_background', srs:"EPSG:3031", format: 'image/png'},
		 {isBaseLayer: true,
		  units:'meters',
		  projection:"EPSG:3031",
		  maxExtent: new OpenLayers.Bounds(-3333134.0274246735, -3333134.0274246735, 3333134.0274246735, 3333134.0274246735),
		 }
		 );

		map.setBaseLayer(gebco);
		addOLlayer({type: "geo", fname: "World grid", layers: "World:geogrid", show: 'false'});
		addOLlayer({type: "geo", fname: "Grid 5&deg;", layers: "World:grid5deg", show: 'false'});

                var geo_geo_6557_0 = new OpenLayers.Layer.WMS(
	'1'
	,'https://gis.ngdc.noaa.gov/arcgis/services/IHO/undersea_features/MapServer/WMSServer?'
	,{layers:'2,7',format:'image/png',styles:'',transparent:true,layerDefs:'{"2":"NAME=\'Abbott\'", "7":"NAME=\'Abbott\'"}'}
	,{opacity:0.5,transparent:true,wrapDateLine:true});;
                map.addLayer(geo_geo_6557_0);
                geo_geo_6557_0.setVisibility(true);

				var EPSG4326 = new OpenLayers.Projection("EPSG:4326");
				//Antarctica Polar Stereographic - see Proj4js.defs before map is initialised
				var EPSG3031 = new OpenLayers.Projection("EPSG:3031");
			    var oldproj = map.getProjectionObject();
			    var newproj = null;
				

				//controls
				map.addControl(new OpenLayers.Control.LayerSwitcher());
				map.addControl(new OpenLayers.Control.MousePosition({div: document.getElementById('gaz_position'), formatOutput: formatposition}));
				function formatposition(lonLat){
				  return("<small>lat: " +Math.round(lonLat.lat*100)/100 + " lon: " + Math.round(lonLat.lon*100)/100) + "</small>";
                }

				var objectBounds = new OpenLayers.Bounds(172.8,30.3,175.8,33.3);
objectBounds.transform(EPSG4326,oldproj);
		 setTimeout("map.zoomToExtent(objectBounds, true)",100);


				//zoom to contents of GML layers
				if (GMLlayers[0] && GMLlayers[0].name.indexOf('ounding box')!=-1){
				 GMLlayers[0].events.register('loadend', map, function(evt) {
				  map.zoomToExtent(GMLlayers[0].getDataExtent());
				 });
				}

                function reprojectGML(oldp,newp){
				 for(var j=0; j < GMLlayers.length; j++) {
				  var features = GMLlayers[j].features;
		          for(var i=0; i < features.length; i++) {
				   var feature = features[i];
				   feature.geometry.transform(oldp,newp);
				  }
				 }
				}

				//zoom to BBOX
				map.events.register('changebaselayer', map, function(evt) {
				 newproj = map.getProjectionObject();
				 if (evt.layer.projection=="EPSG:3031") {
				  var bounds=evt.layer.maxExtent;
				 }else{
				  var bounds = new OpenLayers.Bounds(172.8,30.3,175.8,33.3);
				  bounds.transform(EPSG4326,newproj);
				 }
				 reprojectGML(oldproj,newproj);
				 map.zoomToExtent(bounds,true);
				 oldproj = map.getProjectionObject(); //save current projection
		    	});

				//prevent IE error on click
				function onFeatureUnselect(feature) { map.removePopup(feature.popup); }
			</script>
	</div><!--close content-->
	<div id="footer">
	 <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank"><img src="https://www.marineregions.org/images/cc-by_80x15.png" alt="CC-BY" /></a> <a href="https://www.marineregions.org/disclaimer.php">Disclaimer</a> | <a href="mailto:&#105;&#110;&#102;&#111;&#64;&#109;&#97;&#114;&#105;&#110;&#101;&#114;&#101;&#103;&#105;&#111;&#110;&#115;&#46;&#111;&#114;&#103;">&#105;&#110;&#102;&#111;&#64;&#109;&#97;&#114;&#105;&#110;&#101;&#114;&#101;&#103;&#105;&#111;&#110;&#115;&#46;&#111;&#114;&#103;</a>
	 <div style="float:right;">
	 Website developed and maintained by <a href="https://www.vliz.be/en" target="_blank">VLIZ<img src="https://www.marineregions.org/images/vlizlogo.png" border="0" style="vertical-align:middle;" /></a>
	 </div>
	</div><!--close footer-->
	</div><!--close wrapper--></body>
	</html>